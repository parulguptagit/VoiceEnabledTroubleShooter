<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARIA â€” iPhone Troubleshooting Agent</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div id="file-protocol-warning" style="display: none; position: fixed; top: 0; left: 0; right: 0; background: #c00; color: #fff; padding: 10px; text-align: center; z-index: 9999;">
    Open this app from the server: <strong>http://localhost:8000</strong> (run <code>python main.py</code> first). Buttons will not work when opening the HTML file directly.
  </div>
  <header class="header">
    <div class="header-left">
      <span class="header-logo">â—ˆ ARIA</span>
      <span class="header-title">iPhone Troubleshooting Agent</span>
      <span class="header-subtitle">Voice-enabled support</span>
    </div>
    <div class="header-right">
      <span class="live-dot" title="Live"></span>
      <button class="settings-btn" type="button" aria-label="Settings">âš™</button>
    </div>
  </header>

  <div class="panels">
    <!-- Left: Document Manager -->
    <aside class="panel panel-left">
      <label class="docs-upload" id="docs-upload" for="file-input">
        Drop PDF, MD, or TXT here â€” or click to upload
      </label>
      <input type="file" id="file-input" accept=".pdf,.md,.txt" multiple />
      <div class="docs-list" id="docs-list"></div>
    </aside>

    <!-- Center: Conversation -->
    <main class="panel panel-center">
      <div class="conversation" id="conversation"></div>
      <div class="input-bar">
        <button type="button" class="hold-speak" id="hold-speak">ðŸŽ™ Hold to Speak</button>
        <button type="button" class="attach-btn" id="attach-image" aria-label="Attach image">ðŸ“Ž</button>
        <input type="file" id="image-input" accept="image/*" capture="environment" />
        <div class="text-input-wrap">
          <input type="text" id="text-input" placeholder="Type your message..." />
          <button type="button" id="send-btn">â†µ Send</button>
        </div>
        <div class="voice-status" id="voice-status"></div>
      </div>
    </main>

    <!-- Right: Session Context -->
    <aside class="panel panel-right context-panel">
      <div class="context-section process-steps-section">
        <h3>Process (Think / Act / Observe)</h3>
        <ul class="process-steps-list" id="process-steps-list"></ul>
      </div>
      <div class="context-section">
        <h3>Issue Category</h3>
        <span class="issue-badge" id="issue-badge">â€”</span>
      </div>
      <div class="context-section">
        <h3>Steps Attempted</h3>
        <ul class="steps-list" id="steps-list"></ul>
      </div>
      <div class="context-section">
        <h3>Sources Used</h3>
        <div class="sources-list" id="sources-list"></div>
      </div>
      <div id="escalation-alert" class="escalation-alert" style="display: none;">
        Consider contacting Apple Support.
      </div>
    </aside>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
